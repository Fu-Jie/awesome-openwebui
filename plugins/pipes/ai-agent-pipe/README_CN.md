# AI Agent Pipe

[English](./README.md) | 中文

AI代理管道插件，让所有AI响应都以代理模式进行多步骤分析和工具使用。

## 功能特性

- 🤖 **完整代理工作流程**：模拟AI代理的多轮思考和工具调用
- 🔄 **多次推理过程**：展示AI的迭代思考和分析
- 🛠️ **工具调用模拟**：演示各种工具的使用和结果处理
- 📊 **结构化展示**：清晰展示每个思考步骤和工具调用
- 🎯 **最终答案总结**：提供完整的解决方案

## 安装使用

1. 将 `ai_agent_pipe.py` 文件下载到本地
2. 打开OpenWebUI管理设置，找到"插件"部分
3. 选择"Pipes"类型
4. 上传下载的文件
5. 刷新页面并在聊天设置中启用管道
6. 所有后续AI响应都会自动应用代理分析

## 配置选项

- **启用代理模式**：控制是否对所有响应应用代理分析
- **优先级**：设置管道的执行优先级

## 使用示例

启用后，任何AI响应都会被转换为完整的代理工作流程：

```markdown
## 🤖 AI代理完整工作流程

### 🎯 问题
如何优化我的网站性能？

### 🤔 思考步骤 1
我需要分析网站性能问题。首先应该检查当前的性能指标...

### 🛠️ 工具调用 2
**工具：** web_search
**输入：** 网站性能优化最佳实践 2024
**原因：** 获取最新的性能优化方法

### 📊 工具结果 3
**输出：** 找到多篇关于性能优化的文章...
**分析：** 发现关键优化点包括图片压缩、缓存策略等

### 🤔 思考步骤 4
基于搜索结果，我需要进一步分析代码层面的问题...

### 🛠️ 工具调用 5
**工具：** code_analyzer
**输入：** 检查网站代码中的性能瓶颈
**原因：** 深入分析代码质量和性能问题

### 🎉 最终答案
基于多轮分析和工具调用，这里是完整的性能优化方案...

### 📋 使用工具
• web_search
• code_analyzer
• data_processor

### 📊 置信度
高 - 经过多轮验证和工具确认
```

## 工作原理

管道会在AI生成响应后自动模拟完整的代理工作流程：

1. **问题理解**：深入分析用户提出的问题
2. **多轮思考**：进行迭代式的推理和分析
3. **工具选择**：根据需要选择合适的工具
4. **工具调用**：模拟工具的使用和参数传递
5. **结果处理**：分析工具返回的结果
6. **继续推理**：基于结果进行进一步思考
7. **最终总结**：整合所有信息提供完整答案

## 故障排除

- 确保OpenWebUI版本支持Pipe插件
- 检查管道是否正确启用
- 查看日志中的错误信息
- 如果响应格式异常，可以禁用管道

## 版本历史

- v1.0.0: 初始版本，支持基础代理式响应转换
